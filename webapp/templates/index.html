<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cover Letter Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dist/output.css') }}">
    <style>
    </style>
    <script src=""></script>
</head>
<body>
    <div class="min-h-screen" style="background-image: linear-gradient(115deg, #230624, #ab037e );">
        <div class="container mx-auto py-20">
            <div class="flex w-8/12 bg-white rounded-xl mx-auto shadow-lg overflow-hidden">

                <div class="flex flex-col w-1/2 py-8 px-12 text-center">
                    <h2 class="text-3xl whitespace-nowrap py-2">Fill this form:</h2>

                    <form id="form" class="flex flex-col">

                        <input type="text" id="name" name="name" placeholder="Enter your full name"
                               class="px-4 py-2 mb-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>

                        <input type="text" id="mail" name="mail" placeholder="Enter your e-mail"
                               class="px-4 py-2 mb-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>

                        <input type="text" id="num" name="num" placeholder="Enter your phone number"
                               class="px-4 py-2 mb-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>

                        <input type="text" id="title" name="title" placeholder="Enter your job title"
                               class="px-4 py-2 mb-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>

                        <input type="text" id="cname" name="cname" placeholder="Enter the company name"
                               class="px-4 py-2 mb-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>

                        <textarea id="desc" name="desc" placeholder="Describe the job (max. 300 characters)" maxlength="300"
                                  class="resize-none px-4 py-2 h-32 mb-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-left" required></textarea>

                        <div class="flex flex-col w-full mb-4 pt-4 pb-2">
                            <h2 class="text-2xl whitespace-nowrap">Select maximum length:</h2>
                            <div class="flex space-x-4 justify-center items-center py-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" id="option50" name="amount" value="50"
                                           class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                                    <span class="ml-2 text-lg">50</span>
                                </label>

                                <label class="inline-flex items-center">
                                    <input type="radio" id="option100" name="amount" value="100"
                                           class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                                    <span class="ml-2 text-lg">100</span>
                                </label>

                                <label class="inline-flex items-center">
                                    <input type="radio" id="option150" name="amount" value="150"
                                           class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                                    <span class="ml-2 text-lg">150</span>
                                </label>
                            </div>
                        </div>
                        <button type="submit"
                                class="mt-6 px-6 py-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                            Submit
                        </button>
                    </form>
                </div>

                <div class="flex flex-col w-1/2 bg-cover px-6 pb-6" style="background-color: black; height: auto;">
                    <h3 id="right_title" class="mt-6 text-2xl font-bold text-center text-white">The cover letter will appear here:</h3>
                
                    <div class="invisible mt-4 p-4 bg-gray-100 rounded-md px-6 flex-grow">
                        <div id="result"
                            class="whitespace-pre-line h-full w-full overflow-y-auto px-4 py-2 border border-gray-300 rounded-md text-left bg-white text-gray-800">
                        </div>
                    </div>
                </div>



                <script>
                    const form = document.getElementById("form");
                
                    form.addEventListener("submit", async (e) => {
                      e.preventDefault();
                      const formData = new FormData(form);
                
                      const response = await fetch("/generate", {
                        method: "POST",
                        body: formData,
                      });
                
                      const data = await response.json();
                      document.getElementById('right_title').innerText = "Your cover letter!"
                      document.getElementById("result").innerText = data.cover_letter;
                    });
                </script>

            </div>
        </div>
    </div>
</body>
</html>
